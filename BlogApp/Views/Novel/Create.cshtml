@model BlogApp.Models.Novel

@{
    ViewData["Title"] = "新建小说";
    var categories = ViewBag.Categories as List<BlogApp.Models.Category>;
}

<h2 style="margin-bottom: 32px;">新建小说</h2>
<form method="post" enctype="multipart/form-data" style="max-width:420px; margin:0 auto; background:#fff; padding:36px 28px 28px 28px; border-radius:16px; box-shadow:0 2px 12px #eee;">
    <div class="mb-3">
        <label class="form-label">小说标题</label>
        <input name="Title" class="form-control" required placeholder="请输入小说标题" />
    </div>
    <div class="mb-3">
        <label class="form-label">分类</label>
        <select name="CategoryId" class="form-select" required>
            <option value="">请选择分类</option>
            @foreach (var c in categories)
            {
                <option value="@c.Id">@c.Name</option>
            }
        </select>
    </div>
    <div class="mb-3">
        <label class="form-label">简介</label>
        <textarea name="Description" class="form-control" style="min-height: 80px;" required placeholder="简单介绍一下..."></textarea>
    </div>
    <div class="mb-3">
        <label class="form-label">上传封面</label>
        <input type="file" name="CoverImage" accept="image/*" class="form-control" style="padding:7px 12px;" />
        <small class="form-text text-muted">可选，支持jpg/png，建议比例3:4</small>
    </div>
    <button type="submit" class="btn btn-danger w-100" style="font-size:18px; border-radius:8px;">提交新书</button>
</form>

</div>
<script>
function showCoverPreview(event) {
    var file = event.target.files[0];
    var reader = new FileReader();
    reader.onload = function (e) {
        document.getElementById('cover-preview').style.display = "block";
        document.querySelector('#cover-preview img').src = e.target.result;
    };
    if(file) reader.readAsDataURL(file);
}
</script>


@*
<label>分类：<input name="Category" /></label>
<label>
    状态：
    <select name="Status">
        <option value="连载中">连载中</option>
        <option value="已完结">已完结</option>
    </select>
</label>
*@


@*
<h2>创建新书</h2>

<form asp-action="Create" method="post">
    <div>
        <label asp-for="Title">书名：</label><br />
        <input asp-for="Title" />
    </div>

    <div>
        <label asp-for="Description">简介：</label><br />
        <textarea asp-for="Description" rows="4" cols="50"></textarea>
    </div>

    <button type="submit">提交</button>
</form>*@
